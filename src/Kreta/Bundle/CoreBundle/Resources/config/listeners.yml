# This file belongs to Kreta.
# The source code of application includes a LICENSE file
# with all information about license.
#
# @author benatespina <benatespina@gmail.com>
# @author gorkalaucirica <gorka.lauzirika@gmail.com>

services:
    kreta_core.event_listener.json_exception:
        class: %kreta_core.event_listener.json_exception.class%
        tags:
            - { name: kernel.event_listener, event: kernel.exception, method: onKernelException, priority: 200 }

    kreta_core.event_listener.resource_if_allowed_annotation:
        class: %kreta_core.event_listener.resource_if_allowed_annotation.class%
        abstract: true
        arguments:
            - @annotations.reader
            - @security.authorization_checker

    kreta_core.event_listener.role_annotation:
        class: %kreta_core.event_listener.role_annotation.class%
        arguments:
            - @annotations.reader
            - @security.token_storage
        tags:
            - { name: kernel.event_listener, event: kernel.controller, method: onRoleAnnotationMethod }
